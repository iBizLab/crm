# MYSQL5 <!-- {docsify-ignore-all} -->

## [客户(ACCOUNT)](module/crm/account.md) :id=account

#### 数据查询(DEFAULT) :id=account-Default
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

```

#### 默认（全部数据）(VIEW) :id=account-View
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

```

#### 分配的客户(assigned) :id=account-assigned
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

WHERE EXISTS(SELECT * FROM `RELATION` t21 
 WHERE 
 t1.`ID` = t21.`PRINCIPAL_ID`  AND  ( t21.`TARGET_ID` = #{ctx.sessioncontext.userid} ) )
```

#### 创建者(createman) :id=account-createman
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 当前客户(current) :id=account-current
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

WHERE ( t1.`ID` = #{ctx.datacontext.account} )
```

#### 当前客户外其他客户(not_current) :id=account-not_current
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

```

#### 所有者(owner) :id=account-owner
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```

#### 被关联的数据(target_relation) :id=account-target_relation
```sql
SELECT
t1.`ACCOUNT_NAME`,
t1.`ACCOUNT_NUMBER`,
t1.`ACCOUNT_SITE`,
t1.`ACCOUNT_TYPE`,
t1.`ANNUAL_REVENUE`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMPLOYEES`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`ID`,
t1.`INDUSTRY`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNERSHIP`,
t11.`ACCOUNT_NAME` AS `PACCOUNT_NAME`,
t1.`PHONE`,
t1.`PID`,
t1.`RATING`,
t1.`RECORD_LMAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SIC_CODE`,
t1.`TAG`,
t1.`TICKER_SYMBOL`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`WEBSITE`
FROM `ACCOUNT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`PID` = t11.`ID` 

WHERE EXISTS(SELECT * FROM `RELATION` t21 
 WHERE 
 t1.`ID` = t21.`PRINCIPAL_ID`  AND  ( t21.`TARGET_ID` = #{ctx.datacontext.principal_id} ) )
```


## [活动(ACTIVITIY)](module/crm/activitiy.md) :id=activitiy

#### 数据查询(DEFAULT) :id=activitiy-Default
```sql
SELECT
t1.`AUDITINFO`,
t1.`AUDITTYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`IPADDRESS`,
t1.`NAME`,
t1.`OBJECTID`,
t1.`OBJECTTYPE`,
t1.`OPPERSONID`,
t1.`OPPERSONNAME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `ACTIVITIY` t1 

```

#### 默认（全部数据）(VIEW) :id=activitiy-View
```sql
SELECT
t1.`AUDITINFO`,
t1.`AUDITTYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`IPADDRESS`,
t1.`NAME`,
t1.`OBJECTID`,
t1.`OBJECTTYPE`,
t1.`OPPERSONID`,
t1.`OPPERSONNAME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `ACTIVITIY` t1 

```


## [附件(ATTACHMENT)](module/crm/attachment.md) :id=attachment

#### 数据查询(DEFAULT) :id=attachment-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`FILE_ID`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`TITLE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `ATTACHMENT` t1 

```


## [通话(CALL)](module/crm/call.md) :id=call

#### 数据查询(DEFAULT) :id=call-Default
```sql
SELECT
t1.`CALLER_ID`,
t1.`CALL_AGENDA`,
t1.`CALL_DURATION`,
t1.`CALL_DURATION_IN_SECONDS`,
t1.`CALL_PURPOSE`,
t1.`CALL_RESULT`,
t1.`CALL_START_TIME`,
t1.`CALL_TYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`CTI_ENTRY`,
t1.`DIALLED_NUMBER`,
t1.`ID`,
t1.`NAME`,
t1.`OUTGOING_CALL_STATUS`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`REMINDER`,
t1.`SCHEDULED_IN_CRM`,
t1.`SUBJECT`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VOICE_RECORDING__S`
FROM `CALL` t1 

```

#### 关闭的(close) :id=call-close
```sql
SELECT
t1.`CALLER_ID`,
t1.`CALL_AGENDA`,
t1.`CALL_DURATION`,
t1.`CALL_DURATION_IN_SECONDS`,
t1.`CALL_PURPOSE`,
t1.`CALL_RESULT`,
t1.`CALL_START_TIME`,
t1.`CALL_TYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`CTI_ENTRY`,
t1.`DIALLED_NUMBER`,
t1.`ID`,
t1.`NAME`,
t1.`OUTGOING_CALL_STATUS`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`REMINDER`,
t1.`SCHEDULED_IN_CRM`,
t1.`SUBJECT`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VOICE_RECORDING__S`
FROM `CALL` t1 

```

#### 未关闭的(not_close) :id=call-not_close
```sql
SELECT
t1.`CALLER_ID`,
t1.`CALL_AGENDA`,
t1.`CALL_DURATION`,
t1.`CALL_DURATION_IN_SECONDS`,
t1.`CALL_PURPOSE`,
t1.`CALL_RESULT`,
t1.`CALL_START_TIME`,
t1.`CALL_TYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`CTI_ENTRY`,
t1.`DIALLED_NUMBER`,
t1.`ID`,
t1.`NAME`,
t1.`OUTGOING_CALL_STATUS`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`REMINDER`,
t1.`SCHEDULED_IN_CRM`,
t1.`SUBJECT`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VOICE_RECORDING__S`
FROM `CALL` t1 

```


## [市场活动(CAMPAIGN)](module/crm/campaign.md) :id=campaign

#### 数据查询(DEFAULT) :id=campaign-Default
```sql
SELECT
t1.`ACTUAL_COST`,
t1.`BUDGETED_COST`,
t1.`CAMPAIGN_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATE`,
t1.`EXPECTED_RESPONSE`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`NAME`,
t1.`NATIVE_SURVEY__EXTN__DEPARTMENT_ID`,
t1.`NATIVE__SURVEY__EXTN__SURVEY`,
t1.`NATIVE__SURVEY__EXTN__SURVEY_TYPE`,
t1.`NATIVE__SURVEY__EXTN__SURVEY_URL`,
t1.`NATIVE__SURVEY__EXTN__SURVEY__DEPARTMENT`,
t1.`NATIVE__WEBINAR__EXTN__WEBINAR_LAUNCH_URL`,
t1.`NATIVE__WEBINAR__EXTN__WEBINAR_REGISTRATION_URL`,
t1.`NATIVE__WEBINAR__EXTN__WEBINAR__DURATION`,
t1.`NATIVE__WEBINAR__EXTN__WEBINAR__SCHEDULE`,
t1.`NUM_SENT`,
t1.`START_DATE`,
t1.`STATUS`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `CAMPAIGN` t1 

```


## [联系人(CONTACT)](module/crm/contact.md) :id=contact

#### 数据查询(DEFAULT) :id=contact-Default
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ASSISTANT`,
t1.`ASST_PHONE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DATE_OF_BIRTH`,
t1.`DEPARTMENT`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`HOME_PHONE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LAST_NAME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`MAILING_CITY`,
t1.`MAILING_COUNTRY`,
t1.`MAILING_STATE`,
t1.`MAILING_STREET`,
t1.`MAILING_ZIP`,
t1.`MOBILE`,
t1.`NAME`,
t1.`OTHER_CITY`,
t1.`OTHER_COUNTRY`,
t1.`OTHER_STATE`,
t1.`OTHER_STREET`,
t1.`OTHER_ZIP`,
t1.`OWNER`,
t1.`PHONE`,
t1.`RECORD_IMAGE`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`TAG`,
t1.`TITLE`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `CONTACT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 

```

#### 默认（全部数据）(VIEW) :id=contact-View
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ASSISTANT`,
t1.`ASST_PHONE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DATE_OF_BIRTH`,
t1.`DEPARTMENT`,
t1.`DESCRIPTION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`HOME_PHONE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LAST_NAME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`MAILING_CITY`,
t1.`MAILING_COUNTRY`,
t1.`MAILING_STATE`,
t1.`MAILING_STREET`,
t1.`MAILING_ZIP`,
t1.`MOBILE`,
t1.`NAME`,
t1.`OTHER_CITY`,
t1.`OTHER_COUNTRY`,
t1.`OTHER_STATE`,
t1.`OTHER_STREET`,
t1.`OTHER_ZIP`,
t1.`OWNER`,
t1.`PHONE`,
t1.`RECORD_IMAGE`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`TAG`,
t1.`TITLE`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `CONTACT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 

```

#### 创建者(createman) :id=contact-createman
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ASSISTANT`,
t1.`ASST_PHONE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DATE_OF_BIRTH`,
t1.`DEPARTMENT`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`HOME_PHONE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LAST_NAME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`MAILING_CITY`,
t1.`MAILING_COUNTRY`,
t1.`MAILING_STATE`,
t1.`MAILING_STREET`,
t1.`MAILING_ZIP`,
t1.`MOBILE`,
t1.`NAME`,
t1.`OTHER_CITY`,
t1.`OTHER_COUNTRY`,
t1.`OTHER_STATE`,
t1.`OTHER_STREET`,
t1.`OTHER_ZIP`,
t1.`OWNER`,
t1.`PHONE`,
t1.`RECORD_IMAGE`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`TAG`,
t1.`TITLE`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `CONTACT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 所有者(owner) :id=contact-owner
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ASSISTANT`,
t1.`ASST_PHONE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DATE_OF_BIRTH`,
t1.`DEPARTMENT`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS__S`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`HOME_PHONE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ENRICHED_TIME__S`,
t1.`LAST_NAME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`MAILING_CITY`,
t1.`MAILING_COUNTRY`,
t1.`MAILING_STATE`,
t1.`MAILING_STREET`,
t1.`MAILING_ZIP`,
t1.`MOBILE`,
t1.`NAME`,
t1.`OTHER_CITY`,
t1.`OTHER_COUNTRY`,
t1.`OTHER_STATE`,
t1.`OTHER_STREET`,
t1.`OTHER_ZIP`,
t1.`OWNER`,
t1.`PHONE`,
t1.`RECORD_IMAGE`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`TAG`,
t1.`TITLE`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `CONTACT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```


## [链接(CUSTOM_BUTTON)](module/crm/custom_button.md) :id=custom_button

#### 数据查询(DEFAULT) :id=custom_button-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`URL`
FROM `CUSTOM_BUTTON` t1 

```

#### 创建者(createman) :id=custom_button-createman
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`URL`
FROM `CUSTOM_BUTTON` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 所有者(owner) :id=custom_button-owner
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`URL`
FROM `CUSTOM_BUTTON` t1 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```


## [商机(DEAL)](module/crm/deal.md) :id=deal

#### 全部商机(All) :id=deal-All
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`DESCRIPTION`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

```

#### 根据客户筛选(ByAccount) :id=deal-ByAccount
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

```

#### 数据查询(DEFAULT) :id=deal-Default
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

```

#### 默认（全部数据）(VIEW) :id=deal-View
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`DESCRIPTION`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

```

#### 创建者(createman) :id=deal-createman
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 执行人(executor) :id=deal-executor
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

WHERE EXISTS(SELECT * FROM `EXECUTOR` t41 
 WHERE 
 t1.`ID` = t41.`PRINCIPAL_ID`  AND  t41.`PRINCIPAL_TYPE` = 'DEAL'  AND  ( t41.`USER_ID` = #{ctx.sessioncontext.userid} ) )
```

#### 所有者(owner) :id=deal-owner
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```

#### 商机关联的信息(relation) :id=deal-relation
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

WHERE EXISTS(SELECT * FROM `RELATION` t41 
 WHERE 
 t1.`ID` = t41.`PRINCIPAL_ID`  AND  ( t41.`TARGET_TYPE` = #{ctx.datacontext.target_type}  AND  t41.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) )
```

#### 金额合计(sum) :id=deal-sum
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

```

#### 被关联的商机信息(target_relation) :id=deal-target_relation
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CHANGE_LOG_TIME__S`,
t1.`CLOSING_DATE`,
t1.`CONTACT_ID`,
t31.`NAME` AS `CONTACT_NAME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_NAME`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`LAST_ASSESS_TIME`,
t1.`LEAD_CONVERSIONTIME`,
t1.`LEAD_SOURCE`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NEXT_STEP`,
t1.`OVERALL_SALES_DURATION`,
t1.`OWNER`,
t1.`PROBABILITY`,
t1.`REASON_FOR_LOSS__S`,
t1.`SALES_CYCLE_DURATION`,
t1.`STAGE`,
t21.`PROBABILITY` AS `STAGE_PROBABILITY`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
1 AS `VALIDITY`
FROM `DEAL` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `DEAL_STAGE` t21 ON t1.`STAGE` = t21.`ID` 
LEFT JOIN `CONTACT` t31 ON t1.`CONTACT_ID` = t31.`ID` 

WHERE EXISTS(SELECT * FROM `RELATION` t41 
 WHERE 
 t1.`ID` = t41.`PRINCIPAL_ID`  AND  ( t41.`TARGET_TYPE` = #{ctx.datacontext.principal_type}  AND  t41.`TARGET_ID` = #{ctx.datacontext.principal_id} ) )
```


## [阶段历史(DEAL_HISTORY)](module/crm/deal_history.md) :id=deal_history

#### 数据查询(DEFAULT) :id=deal_history-Default
```sql
SELECT
t1.`AMOUNT`,
t1.`CLOSING_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_ID`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`MOVED_TO__S`,
t1.`NAME`,
t1.`PROBABILITY`,
t1.`STAGE`,
t1.`STAGE_DURATION_CALENDAR_DAYS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `DEAL_HISTORY` t1 

```

#### 创建者(createman) :id=deal_history-createman
```sql
SELECT
t1.`AMOUNT`,
t1.`CLOSING_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DEAL_ID`,
t1.`EXPECTED_REVENUE`,
t1.`ID`,
t1.`LAST_ACTIVITY_TIME`,
t1.`MOVED_TO__S`,
t1.`NAME`,
t1.`PROBABILITY`,
t1.`STAGE`,
t1.`STAGE_DURATION_CALENDAR_DAYS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `DEAL_HISTORY` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```


## [商机阶段(DEAL_STAGE)](module/crm/deal_stage.md) :id=deal_stage

#### 数据查询(DEFAULT) :id=deal_stage-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PROBABILITY`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `DEAL_STAGE` t1 

```

#### 默认（全部数据）(VIEW) :id=deal_stage-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PROBABILITY`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `DEAL_STAGE` t1 

```


## [会议(EVENT)](module/crm/event.md) :id=event

#### 数据查询(DEFAULT) :id=event-Default
```sql
SELECT
t1.`ALL_DAY`,
t1.`CHECK_IN_CITY`,
t1.`CHECK_IN_COUNTRY`,
t1.`CHECK_IN_STATE`,
t1.`CHECK_IN_STATUS`,
t1.`CHECK_IN_SUB_LOCALITY`,
t1.`CHECK_IN_TIME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`EVENT_TITLE`,
t1.`ID`,
t1.`LATITUDE`,
t1.`LONGITUDE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PARTICIPANTS`,
t1.`START_DATETIME`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENUE`,
t1.`ZIP_CODE`
FROM `EVENT` t1 

```

#### 关闭的(close) :id=event-close
```sql
SELECT
t1.`ALL_DAY`,
t1.`CHECK_IN_CITY`,
t1.`CHECK_IN_COUNTRY`,
t1.`CHECK_IN_STATE`,
t1.`CHECK_IN_STATUS`,
t1.`CHECK_IN_SUB_LOCALITY`,
t1.`CHECK_IN_TIME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`EVENT_TITLE`,
t1.`ID`,
t1.`LATITUDE`,
t1.`LONGITUDE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PARTICIPANTS`,
t1.`START_DATETIME`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENUE`,
t1.`ZIP_CODE`
FROM `EVENT` t1 

```

#### 创建者(createman) :id=event-createman
```sql
SELECT
t1.`ALL_DAY`,
t1.`CHECK_IN_CITY`,
t1.`CHECK_IN_COUNTRY`,
t1.`CHECK_IN_STATE`,
t1.`CHECK_IN_STATUS`,
t1.`CHECK_IN_SUB_LOCALITY`,
t1.`CHECK_IN_TIME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`EVENT_TITLE`,
t1.`ID`,
t1.`LATITUDE`,
t1.`LONGITUDE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PARTICIPANTS`,
t1.`START_DATETIME`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENUE`,
t1.`ZIP_CODE`
FROM `EVENT` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 已邀请的(invited) :id=event-invited
```sql
SELECT
t1.`ALL_DAY`,
t1.`CHECK_IN_CITY`,
t1.`CHECK_IN_COUNTRY`,
t1.`CHECK_IN_STATE`,
t1.`CHECK_IN_STATUS`,
t1.`CHECK_IN_SUB_LOCALITY`,
t1.`CHECK_IN_TIME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`EVENT_TITLE`,
t1.`ID`,
t1.`LATITUDE`,
t1.`LONGITUDE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PARTICIPANTS`,
t1.`START_DATETIME`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENUE`,
t1.`ZIP_CODE`
FROM `EVENT` t1 

```

#### 未关闭的(not_close) :id=event-not_close
```sql
SELECT
t1.`ALL_DAY`,
t1.`CHECK_IN_CITY`,
t1.`CHECK_IN_COUNTRY`,
t1.`CHECK_IN_STATE`,
t1.`CHECK_IN_STATUS`,
t1.`CHECK_IN_SUB_LOCALITY`,
t1.`CHECK_IN_TIME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`EVENT_TITLE`,
t1.`ID`,
t1.`LATITUDE`,
t1.`LONGITUDE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PARTICIPANTS`,
t1.`START_DATETIME`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENUE`,
t1.`ZIP_CODE`
FROM `EVENT` t1 

```

#### 所有者(owner) :id=event-owner
```sql
SELECT
t1.`ALL_DAY`,
t1.`CHECK_IN_CITY`,
t1.`CHECK_IN_COUNTRY`,
t1.`CHECK_IN_STATE`,
t1.`CHECK_IN_STATUS`,
t1.`CHECK_IN_SUB_LOCALITY`,
t1.`CHECK_IN_TIME`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`EVENT_TITLE`,
t1.`ID`,
t1.`LATITUDE`,
t1.`LONGITUDE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PARTICIPANTS`,
t1.`START_DATETIME`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENUE`,
t1.`ZIP_CODE`
FROM `EVENT` t1 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```


## [执行人(EXECUTOR)](module/crm/executor.md) :id=executor

#### 数据查询(DEFAULT) :id=executor-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t11.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```

#### 默认（全部数据）(VIEW) :id=executor-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t11.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```

#### 线索跟踪人(lead_notify) :id=executor-lead_notify
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t11.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

WHERE ( t11.`SYSUSERID` <> #{ctx.sessioncontext.srfpersonid}  AND  ( t1.`PRINCIPAL_ID` = #{ctx.webcontext.principal_id}  OR  t1.`PRINCIPAL_ID` = #{ctx.datacontext.id} )  AND  t1.`PRINCIPAL_TYPE` = 'LEAD' )
```

#### 订单通知对象(project_notify) :id=executor-project_notify
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t11.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

WHERE ( t11.`SYSUSERID` <> #{ctx.sessioncontext.srfpersonid}  AND  ( t1.`PRINCIPAL_ID` = #{ctx.webcontext.principal_id}  OR  t1.`PRINCIPAL_ID` = #{ctx.datacontext.id} )  AND  t1.`PRINCIPAL_TYPE` = 'PROJECT' )
```


## [发货单(INVOICE)](module/crm/invoice.md) :id=invoice

#### 数据查询(DEFAULT) :id=invoice-Default
```sql
SELECT
t1.`ADJUSTMENT`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DISCOUNT`,
t1.`DUE_DATE`,
t1.`EXCISE_DUTY`,
t1.`GRAND_TOTAL`,
t1.`ID`,
t1.`INVOICE_DATE`,
t1.`INVOICE_NUMBER`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`PURCHASE_ORDER`,
t1.`SALES_COMMISSIO`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`SUB_TOTAL`,
t1.`TAG`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `INVOICE` t1 

```


## [货品(ITEM)](module/crm/item.md) :id=item

#### 数据查询(DEFAULT) :id=item-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `ITEM` t1 

```


## [线索(LEAD)](module/crm/lead.md) :id=lead

#### 数据查询(DEFAULT) :id=lead-Default
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE t1.IS_DELETED = 0
```

#### 默认（全部数据）(VIEW) :id=lead-View
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE t1.IS_DELETED = 0
```

#### 全部数据(all) :id=lead-all
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE t1.IS_DELETED = 0
```

#### 创建者(createman) :id=lead-createman
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE t1.IS_DELETED = 0 AND ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 执行人(executor) :id=lead-executor
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE EXISTS(SELECT * FROM `EXECUTOR` t31 
 WHERE 
 t1.`ID` = t31.`PRINCIPAL_ID`  AND  t31.`PRINCIPAL_TYPE` = 'LEAD'  AND  ( t31.`USER_ID` = #{ctx.sessioncontext.userid} ) ) AND t1.IS_DELETED = 0
```

#### 所有者(owner) :id=lead-owner
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE t1.IS_DELETED = 0 AND ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```

#### 被关联的数据(target_relation) :id=lead-target_relation
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ANNUALREVENUE`,
t1.`CITY`,
t1.`COMPANY`,
t1.`CONVERTED_DATE_TIME`,
t1.`CONVERTED__S`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESIGNATION`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`ENRICH_STATUS_S`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IS_DELETED`,
t1.`LAST_ASSESS_TIME`,
t1.`LAST_NAME`,
t1.`LEAD_CONVERSION_TIME`,
t1.`LEAD_SOURCE`,
t1.`LEAD_STATUS`,
t1.`MOBILE`,
t1.`NAME`,
t1.`NO_OF_EMPLOYEES`,
t1.`OWNER`,
t1.`PID`,
t21.`SUBJECT` AS `PNAME`,
t1.`SALUTATION`,
t1.`SECONDARY_EMAIL`,
t1.`SKYPE_ID`,
t1.`STATE`,
t1.`STREET`,
t1.`SUBJECT`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`ZIP_CODE`
FROM `LEAD` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `LEAD` t21 ON t1.`PID` = t21.`ID` 

WHERE EXISTS(SELECT * FROM `RELATION` t31 
 WHERE 
 t1.`ID` = t31.`PRINCIPAL_ID`  AND  ( t31.`TARGET_ID` = #{ctx.datacontext.principal_id} ) ) AND t1.IS_DELETED = 0
```


## [活动(MANEUVER)](module/crm/maneuver.md) :id=maneuver

#### 数据查询(DEFAULT) :id=maneuver-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `MANEUVER` t1 

```

#### 默认（全部数据）(VIEW) :id=maneuver-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `MANEUVER` t1 

```


## [备注(NOTE_ATTACH)](module/crm/note_attach.md) :id=note_attach

#### ByOwner :id=note_attach-ByOwner
```sql
SELECT
t1.`CONTENT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_TYPE`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_NAME`,
t1.`PRINCIPAL_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `NOTE_ATTACH` t1 

```

#### 数据查询(DEFAULT) :id=note_attach-Default
```sql
SELECT
t1.`CONTENT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_TYPE`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_NAME`,
t1.`PRINCIPAL_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `NOTE_ATTACH` t1 

```

#### 创建者(createman) :id=note_attach-createman
```sql
SELECT
t1.`CONTENT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_TYPE`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_NAME`,
t1.`PRINCIPAL_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `NOTE_ATTACH` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```


## [订单分配(ORDER_ALLOCATE)](module/crm/order_allocate.md) :id=order_allocate

#### 数据查询(DEFAULT) :id=order_allocate-Default
```sql
SELECT
t1.`AMOUNT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_ID`,
t1.`OWNER_TYPE`,
t1.`RATIO`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`,
t11.`FIRST_NAME` AS `USER_NAME`
FROM `ORDER_ALLOCATE` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```

#### 默认（全部数据）(VIEW) :id=order_allocate-View
```sql
SELECT
t1.`AMOUNT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_ID`,
t1.`OWNER_TYPE`,
t1.`RATIO`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`,
t11.`FIRST_NAME` AS `USER_NAME`
FROM `ORDER_ALLOCATE` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```


## [收款记录(PAYEE)](module/crm/payee.md) :id=payee

#### 数据查询(DEFAULT) :id=payee-Default
```sql
SELECT
t31.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t21.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`METHOD`,
t1.`NAME`,
t21.`ORDER_DATE`,
t21.`OWNER`,
t21.`O_NUMBER`,
t1.`PAYEE_DATE`,
t1.`PAYEE_NUMBER`,
t1.`PAYEE_PLAN_ID`,
t11.`PLANNED_TIME`,
t11.`AMOUNT` AS `PLAN_AMOUNT`,
CONCAT(t41.`NAME`, IFNULL(CONCAT(YEAR(t11.`PLANNED_TIME`), '-', LPAD(MONTH(t11.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t11.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t21.`PID` AS `PPROJECT_ID`,
t1.`PROJECT_ID`,
t21.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t21.`SETTLEMENT_AMOUNT`,
t1.`STATUS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PAYEE` t1 
LEFT JOIN `PAYEE_PLAN` t11 ON t1.`PAYEE_PLAN_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PROJECT_ID` = t21.`ID` 
LEFT JOIN `ACCOUNT` t31 ON t21.`ACCOUNT_ID` = t31.`ID` 
LEFT JOIN `PROJECT` t41 ON t11.`PROJECT_ID` = t41.`ID` 

```

#### 默认（全部数据）(VIEW) :id=payee-View
```sql
SELECT
t31.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t21.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`METHOD`,
t1.`NAME`,
t21.`ORDER_DATE`,
t21.`OWNER`,
t21.`O_NUMBER`,
t1.`PAYEE_DATE`,
t1.`PAYEE_NUMBER`,
t1.`PAYEE_PLAN_ID`,
t11.`PLANNED_TIME`,
t11.`AMOUNT` AS `PLAN_AMOUNT`,
t11.`DESCRIPTION` AS `PLAN_DESCRIPTION`,
CONCAT(t41.`NAME`, IFNULL(CONCAT(YEAR(t11.`PLANNED_TIME`), '-', LPAD(MONTH(t11.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t11.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t21.`PID` AS `PPROJECT_ID`,
t1.`PROJECT_ID`,
t21.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t21.`SETTLEMENT_AMOUNT`,
t1.`STATUS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PAYEE` t1 
LEFT JOIN `PAYEE_PLAN` t11 ON t1.`PAYEE_PLAN_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PROJECT_ID` = t21.`ID` 
LEFT JOIN `ACCOUNT` t31 ON t21.`ACCOUNT_ID` = t31.`ID` 
LEFT JOIN `PROJECT` t41 ON t11.`PROJECT_ID` = t41.`ID` 

```

#### 创建者(createman) :id=payee-createman
```sql
SELECT
t31.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t21.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`METHOD`,
t1.`NAME`,
t21.`ORDER_DATE`,
t21.`OWNER`,
t21.`O_NUMBER`,
t1.`PAYEE_DATE`,
t1.`PAYEE_NUMBER`,
t1.`PAYEE_PLAN_ID`,
t11.`PLANNED_TIME`,
t11.`AMOUNT` AS `PLAN_AMOUNT`,
CONCAT(t41.`NAME`, IFNULL(CONCAT(YEAR(t11.`PLANNED_TIME`), '-', LPAD(MONTH(t11.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t11.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t21.`PID` AS `PPROJECT_ID`,
t1.`PROJECT_ID`,
t21.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t21.`SETTLEMENT_AMOUNT`,
t1.`STATUS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PAYEE` t1 
LEFT JOIN `PAYEE_PLAN` t11 ON t1.`PAYEE_PLAN_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PROJECT_ID` = t21.`ID` 
LEFT JOIN `ACCOUNT` t31 ON t21.`ACCOUNT_ID` = t31.`ID` 
LEFT JOIN `PROJECT` t41 ON t11.`PROJECT_ID` = t41.`ID` 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 执行人(executor) :id=payee-executor
```sql
SELECT
t31.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t21.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`METHOD`,
t1.`NAME`,
t21.`ORDER_DATE`,
t21.`OWNER`,
t21.`O_NUMBER`,
t1.`PAYEE_DATE`,
t1.`PAYEE_NUMBER`,
t1.`PAYEE_PLAN_ID`,
t11.`PLANNED_TIME`,
t11.`AMOUNT` AS `PLAN_AMOUNT`,
CONCAT(t41.`NAME`, IFNULL(CONCAT(YEAR(t11.`PLANNED_TIME`), '-', LPAD(MONTH(t11.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t11.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t21.`PID` AS `PPROJECT_ID`,
t1.`PROJECT_ID`,
t21.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t21.`SETTLEMENT_AMOUNT`,
t1.`STATUS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PAYEE` t1 
LEFT JOIN `PAYEE_PLAN` t11 ON t1.`PAYEE_PLAN_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PROJECT_ID` = t21.`ID` 
LEFT JOIN `ACCOUNT` t31 ON t21.`ACCOUNT_ID` = t31.`ID` 
LEFT JOIN `PROJECT` t41 ON t11.`PROJECT_ID` = t41.`ID` 

WHERE ( EXISTS(SELECT * FROM `EXECUTOR` t31 
 WHERE 
 t21.`ID` = t31.`PRINCIPAL_ID`  AND  ( t31.`USER_ID` = #{ctx.sessioncontext.userid} ) ) )
```

#### 金额汇总(sum) :id=payee-sum
```sql
SELECT
t31.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t21.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`METHOD`,
t1.`NAME`,
t21.`ORDER_DATE`,
t21.`OWNER`,
t21.`O_NUMBER`,
t1.`PAYEE_DATE`,
t1.`PAYEE_NUMBER`,
t1.`PAYEE_PLAN_ID`,
t11.`PLANNED_TIME`,
t11.`AMOUNT` AS `PLAN_AMOUNT`,
CONCAT(t41.`NAME`, IFNULL(CONCAT(YEAR(t11.`PLANNED_TIME`), '-', LPAD(MONTH(t11.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t11.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t21.`PID` AS `PPROJECT_ID`,
t1.`PROJECT_ID`,
t21.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t21.`SETTLEMENT_AMOUNT`,
t1.`STATUS`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PAYEE` t1 
LEFT JOIN `PAYEE_PLAN` t11 ON t1.`PAYEE_PLAN_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PROJECT_ID` = t21.`ID` 
LEFT JOIN `ACCOUNT` t31 ON t21.`ACCOUNT_ID` = t31.`ID` 
LEFT JOIN `PROJECT` t41 ON t11.`PROJECT_ID` = t41.`ID` 

```


## [回款分配(PAYEE_ALLOCATE)](module/crm/payee_allocate.md) :id=payee_allocate

#### 数据查询(DEFAULT) :id=payee_allocate-Default
```sql
SELECT
t1.`AMOUNT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PAYEE_ID`,
t1.`RATIO`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`,
t11.`FIRST_NAME` AS `USER_NAME`
FROM `PAYEE_ALLOCATE` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```

#### 默认（全部数据）(VIEW) :id=payee_allocate-View
```sql
SELECT
t1.`AMOUNT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PAYEE_ID`,
t1.`RATIO`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`,
t11.`FIRST_NAME` AS `USER_NAME`
FROM `PAYEE_ALLOCATE` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```


## [收款计划(PAYEE_PLAN)](module/crm/payee_plan.md) :id=payee_plan

#### 数据查询(DEFAULT) :id=payee_plan-Default
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

```

#### 默认（全部数据）(VIEW) :id=payee_plan-View
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

```

#### 全部(all) :id=payee_plan-all
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

WHERE ( ( t1.`PLAN_STATUS` = '10' ) )
```

#### 创建者(createman) :id=payee_plan-createman
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 执行人(executor) :id=payee_plan-executor
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

WHERE ( EXISTS(SELECT * FROM `EXECUTOR` t21 
 WHERE 
 t11.`ID` = t21.`PRINCIPAL_ID`  AND  ( t21.`USER_ID` = #{ctx.sessioncontext.userid} ) ) )
```

#### 金额汇总(sum) :id=payee_plan-sum
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

```

#### 进行中(toward) :id=payee_plan-toward
```sql
SELECT
t21.`ACCOUNT_NAME`,
t1.`AMOUNT`,
t11.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`IS_NOT_IN_PLAN`,
t1.`NAME`,
t11.`ORDER_DATE`,
t11.`OWNER`,
t11.`O_NUMBER`,
t1.`PLANNED_TIME`,
CONCAT(t11.`NAME`, IFNULL(CONCAT(YEAR(t1.`PLANNED_TIME`), '-', LPAD(MONTH(t1.`PLANNED_TIME`), 2, '0'), '-', LPAD(DAY(t1.`PLANNED_TIME`), 2, '0')), '未明确'), '收款计划') AS `PLAN_NAME`,
t1.`PLAN_STATUS`,
t11.`PID` AS `PPROJECT_ID`,
t11.`AMOUNT` AS `PROJECT_AMOUNT`,
t1.`PROJECT_ID`,
t11.`NAME` AS `PROJECT_NAME`,
t1.`SEQUENCE`,
t11.`SETTLEMENT_AMOUNT`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_PLAN` t1 
LEFT JOIN `PROJECT` t11 ON t1.`PROJECT_ID` = t11.`ID` 
LEFT JOIN `ACCOUNT` t21 ON t11.`ACCOUNT_ID` = t21.`ID` 

WHERE ( t1.`PLAN_STATUS` = '10' )
```


## [收款情况统计(PAYEE_STATISTIC)](module/crm/payee_statistic.md) :id=payee_statistic

#### 数据查询(DEFAULT) :id=payee_statistic-Default
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

```

#### 默认（全部数据）(VIEW) :id=payee_statistic-View
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

```

#### 通过姓名查询(byName) :id=payee_statistic-byName
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

```

#### 当前收款(curPayee) :id=payee_statistic-curPayee
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

WHERE ( t1.`TYPE` = '2'  AND  t1.`STATISTIC_DATE` >= #{ctx.datacontext.gt}  AND  t1.`STATISTIC_DATE` < #{ctx.datacontext.lt} )
```

#### 当前计划(curPlan) :id=payee_statistic-curPlan
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

WHERE ( t1.`TYPE` = '1'  AND  t1.`STATISTIC_DATE` >= #{ctx.datacontext.gt}  AND  t1.`STATISTIC_DATE` < #{ctx.datacontext.lt} )
```

#### 空未明确(emptyIndefinite) :id=payee_statistic-emptyIndefinite
```sql
SELECT T1.* FROM (
SELECT
0 AS AMOUNT,
#{ctx.datacontext.n_business_line_eq} AS BUSINESS_LINE,
NULL AS CREATE_MAN,
NULL AS CREATE_TIME,
UUID() AS ID,
'未明确' AS NAME,
#{ctx.datacontext.n_owner_eq} AS OWNER,
NULL AS SECTOR,
NULL AS STATISTIC_DATE,
'0' AS TYPE,
NULL AS UPDATE_MAN,
NULL AS UPDATE_TIME
FROM DUAL  
) T1
```

#### 空收款记录(emptyPayee) :id=payee_statistic-emptyPayee
```sql
SELECT T1.* FROM (
SELECT DISTINCT
0 AS AMOUNT,
#{ctx.datacontext.n_business_line_eq} AS BUSINESS_LINE,
NULL AS CREATE_MAN,
NULL AS CREATE_TIME,
UUID() AS ID,
DATE_FORMAT(your_date, '%Y-%m') AS NAME,
#{ctx.datacontext.n_owner_eq} AS OWNER,
NULL AS SECTOR,
NULL AS STATISTIC_DATE,
'1' AS TYPE,
NULL AS UPDATE_MAN,
NULL AS UPDATE_TIME
FROM (
    SELECT
        DATE_ADD(
            DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.gt},'%Y-%m-%d'), '%Y-%m-01'),
            INTERVAL a.a + (10 * b.a) MONTH
        ) AS your_date
    FROM
        (SELECT 0 a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
    CROSS JOIN
        (SELECT 0 a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
    WHERE
        DATE_ADD(DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.gt},'%Y-%m-%d'), '%Y-%m-01'),INTERVAL a.a + (10 * b.a) MONTH) <= DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.lt},'%Y-%m-%d'), '%Y-%m-01') - INTERVAL 1 DAY
) AS months
) T1
```

#### 空计划(emptyPlan) :id=payee_statistic-emptyPlan
```sql
SELECT T1.* FROM (
SELECT DISTINCT
0 AS AMOUNT,
#{ctx.datacontext.n_business_line_eq} AS BUSINESS_LINE,
NULL AS CREATE_MAN,
NULL AS CREATE_TIME,
UUID() AS ID,
DATE_FORMAT(your_date, '%Y-%m') AS NAME,
#{ctx.datacontext.n_owner_eq} AS OWNER,
NULL AS SECTOR,
NULL AS STATISTIC_DATE,
'2' AS TYPE,
NULL AS UPDATE_MAN,
NULL AS UPDATE_TIME
FROM (
    SELECT
        DATE_ADD(
            DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.gt},'%Y-%m-%d'), '%Y-%m-01'),
            INTERVAL a.a + (10 * b.a) MONTH
        ) AS your_date
    FROM
        (SELECT 0 a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
    CROSS JOIN
        (SELECT 0 a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
    WHERE
        DATE_ADD(DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.gt},'%Y-%m-%d'), '%Y-%m-01'),INTERVAL a.a + (10 * b.a) MONTH) <= DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.lt},'%Y-%m-%d'), '%Y-%m-01') - INTERVAL 1 DAY
) AS months
) T1
```

#### 查询计划和记录(findplan_payee) :id=payee_statistic-findplan_payee
```sql
SELECT T1.* FROM (
SELECT T2.O_NUMBER,T2.NAME AS PROJECT_NAME,T3.ACCOUNT_NAME,T2.BUSINESS_LINE,'0' AS TYPE,T1.AMOUNT,T1.PLANNED_TIME AS STATISTIC_DATE,T2.OWNER,T1.DESCRIPTION,T1.ID AS ID,T2.ID AS PROJECT_ID FROM PAYEE_PLAN T1,PROJECT T2,ACCOUNT T3
WHERE T1.PROJECT_ID = T2.ID AND T2.ACCOUNT_ID = T3.ID AND '0' = #{ctx.datacontext.type} AND T1.PLANNED_TIME IS NULL AND T1.PLAN_STATUS = '10'
UNION ALL

SELECT T2.O_NUMBER,T2.NAME AS PROJECT_NAME,T3.ACCOUNT_NAME,T2.BUSINESS_LINE,'2' AS TYPE,T1.AMOUNT,T1.PLANNED_TIME AS STATISTIC_DATE,T2.OWNER,T1.DESCRIPTION,T1.ID AS ID,T2.ID AS PROJECT_ID FROM PAYEE_PLAN T1,PROJECT T2,ACCOUNT T3
WHERE T1.PROJECT_ID = T2.ID AND T2.ACCOUNT_ID = T3.ID AND '2' = #{ctx.datacontext.type} AND CONCAT(YEAR(T1.PLANNED_TIME),'-',LPAD(MONTH(T1.PLANNED_TIME), 2, '0')) = #{ctx.datacontext.name} AND T1.PLAN_STATUS = '10'
UNION ALL

SELECT T2.O_NUMBER,T2.NAME AS PROJECT_NAME,T3.ACCOUNT_NAME,T2.BUSINESS_LINE,'1' AS TYPE,T1.AMOUNT,T1.PAYEE_DATE AS STATISTIC_DATE,T2.OWNER,T1.DESCRIPTION,T1.ID AS ID,T2.ID AS PROJECT_ID FROM PAYEE T1,PROJECT T2,ACCOUNT T3
WHERE T1.PROJECT_ID = T2.ID AND T2.ACCOUNT_ID = T3.ID AND '1' = #{ctx.datacontext.type} AND CONCAT(YEAR(T1.PAYEE_DATE),'-',LPAD(MONTH(T1.PAYEE_DATE), 2, '0')) = #{ctx.datacontext.name} 
UNION ALL

SELECT T2.O_NUMBER,T2.NAME AS PROJECT_NAME,T3.ACCOUNT_NAME,T2.BUSINESS_LINE,'3' AS TYPE,T1.AMOUNT,T1.PLANNED_TIME AS STATISTIC_DATE,T2.OWNER,T1.DESCRIPTION,T1.ID AS ID,T2.ID AS PROJECT_ID FROM PAYEE_PLAN T1,PROJECT T2,ACCOUNT T3
WHERE T1.PROJECT_ID = T2.ID AND T2.ACCOUNT_ID = T3.ID AND '3' = #{ctx.datacontext.type} AND T1.PLANNED_TIME > STR_TO_DATE(CONCAT(#{ctx.datacontext.lt},'-01'), '%Y-%m-%d') AND T1.PLAN_STATUS = '10'
UNION ALL

SELECT T2.O_NUMBER,T2.NAME AS PROJECT_NAME,T3.ACCOUNT_NAME,T2.BUSINESS_LINE,'1' AS TYPE,T1.AMOUNT,T1.PAYEE_DATE AS STATISTIC_DATE,T2.OWNER,T1.DESCRIPTION,T1.ID AS ID,T2.ID AS PROJECT_ID FROM PAYEE T1,PROJECT T2,ACCOUNT T3
WHERE T1.PROJECT_ID = T2.ID AND T2.ACCOUNT_ID = T3.ID AND '3' = #{ctx.datacontext.type} AND T1.PAYEE_DATE > STR_TO_DATE(CONCAT(#{ctx.datacontext.lt},'-01'), '%Y-%m-%d')

) T1
```

#### 未明确(indefinite) :id=payee_statistic-indefinite
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

WHERE ( t1.`TYPE` = '0' )
```

#### 所有者(owner) :id=payee_statistic-owner
```sql
SELECT
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`SECTOR`,
t1.`STATISTIC_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PAYEE_STATISTIC` t1 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.unknown} )
```

#### 统计时间之后(pending) :id=payee_statistic-pending
```sql
SELECT
SUM(t1.`AMOUNT`) AS AMOUNT,
	t1.`BUSINESS_LINE`,
	t1.`CREATE_MAN`,
	t1.`CREATE_TIME`,
	t1.`ID`,
	CONCAT(YEAR(#{ctx.datacontext.lt}),'-',LPAD(MONTH(#{ctx.datacontext.lt}), 2, '0'),'之后') AS NAME,
	t1.`OWNER`,
	t1.`SECTOR`,
	t1.`STATISTIC_DATE`,
	'3' AS TYPE,
	t1.`UPDATE_MAN`,
	t1.`UPDATE_TIME` 
FROM `PAYEE_STATISTIC` t1
WHERE ( t1.`STATISTIC_DATE` >= #{ctx.datacontext.lt}  AND  t1.`TYPE` = '2' )
```


## [价格表(PRICE_BOOK)](module/crm/price_book.md) :id=price_book

#### 数据查询(DEFAULT) :id=price_book-Default
```sql
SELECT
t1.`ACTIVE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`PRICE_BOOK_NAME`,
t1.`PRICING_DETAILS`,
t1.`PRICING_MODEL`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PRICE_BOOK` t1 

```


## [产品(PRODUCT)](module/crm/product.md) :id=product

#### 数据查询(DEFAULT) :id=product-Default
```sql
SELECT
t1.`COMMISSION_RATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`MANUFACTURER`,
t1.`NAME`,
t1.`OWNER`,
t1.`PRODUCT_ACTIVE`,
t1.`PRODUCT_CATEGORY`,
t1.`PRODUCT_CODE`,
t1.`PRODUCT_NAME`,
t1.`QTY_IN_DEMAND`,
t1.`QTY_IN_STOCK`,
t1.`QTY_ORDERED`,
t1.`RECORD_IMAGE`,
t1.`REORDER_LEVEL`,
t1.`SALES_END_DATE`,
t1.`SALES_START_DATE`,
t1.`SUPPORT_EXPIRY_DATE`,
t1.`SUPPORT_START_DATE`,
t1.`TAG`,
t1.`TAX`,
t1.`TAXABLE`,
t1.`UNIT_PRICE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USAGE_UNIT`,
t1.`VENDOR_ID`,
t11.`NAME` AS `VENDOR_NAME`
FROM `PRODUCT` t1 
LEFT JOIN `VENDOR` t11 ON t1.`VENDOR_ID` = t11.`ID` 

```

#### 关联的目标产品(relation_target) :id=product-relation_target
```sql
SELECT
t1.`COMMISSION_RATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`MANUFACTURER`,
t1.`NAME`,
t1.`OWNER`,
t1.`PRODUCT_ACTIVE`,
t1.`PRODUCT_CATEGORY`,
t1.`PRODUCT_CODE`,
t1.`PRODUCT_NAME`,
t1.`QTY_IN_DEMAND`,
t1.`QTY_IN_STOCK`,
t1.`QTY_ORDERED`,
t1.`RECORD_IMAGE`,
t1.`REORDER_LEVEL`,
t1.`SALES_END_DATE`,
t1.`SALES_START_DATE`,
t1.`SUPPORT_EXPIRY_DATE`,
t1.`SUPPORT_START_DATE`,
t1.`TAG`,
t1.`TAX`,
t1.`TAXABLE`,
t1.`UNIT_PRICE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USAGE_UNIT`,
t1.`VENDOR_ID`,
t11.`NAME` AS `VENDOR_NAME`
FROM `PRODUCT` t1 
LEFT JOIN `VENDOR` t11 ON t1.`VENDOR_ID` = t11.`ID` 

WHERE EXISTS(SELECT * FROM `RELATION` t21 
 WHERE 
 t1.`ID` = t21.`TARGET_ID`  AND  ( t21.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id}  AND  t21.`PRINCIPAL_TYPE` = #{ctx.datacontext.principal_type} ) )
```


## [产品证书(PRODUCT_CERTIFICATE)](module/crm/product_certificate.md) :id=product_certificate

#### 数据查询(DEFAULT) :id=product_certificate-Default
```sql
SELECT
t1.`ACCREDITED_ORGANIZATION`,
t1.`AWARDING_ORGANIZATION`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATE`,
t1.`ID`,
t1.`ISSUE_DATE`,
t1.`ISSUE_MAN`,
t1.`NAME`,
t1.`PC_NUMBER`,
t1.`PRODUCT_ID`,
t1.`SCOPE`,
t1.`SERVICE_NAME`,
t1.`START_DATE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PRODUCT_CERTIFICATE` t1 

```

#### 默认（全部数据）(VIEW) :id=product_certificate-View
```sql
SELECT
t1.`ACCREDITED_ORGANIZATION`,
t1.`AWARDING_ORGANIZATION`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`END_DATE`,
t1.`ID`,
t1.`ISSUE_DATE`,
t1.`ISSUE_MAN`,
t1.`NAME`,
t1.`PC_NUMBER`,
t1.`PRODUCT_ID`,
t1.`SCOPE`,
t1.`SERVICE_NAME`,
t1.`START_DATE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PRODUCT_CERTIFICATE` t1 

```


## [订单(PROJECT)](module/crm/project.md) :id=project

#### 数据查询(DEFAULT) :id=project-Default
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

```

#### 查询实体订单(QueryPhysicalOrder) :id=project-QueryPhysicalOrder
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

WHERE ( t1.`IS_PHYSICAL_ORDER` = 1  AND  t1.`ORDER_DATE` >= #{ctx.datacontext.gt}  AND  t1.`ORDER_DATE` < #{ctx.datacontext.lt} )
```

#### 查询实体订单(QueryPhysicalOrderGrid) :id=project-QueryPhysicalOrderGrid
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

WHERE ( t1.`IS_PHYSICAL_ORDER` = 1  AND  t1.`ORDER_DATE` < #{ctx.datacontext.lt}  AND  t1.`ORDER_DATE` >= #{ctx.datacontext.gt}  AND  CONCAT(YEAR(T1.ORDER_DATE),'-',LPAD(MONTH(T1.ORDER_DATE), 2, '0')) = #{ctx.datacontext.order_date} )
```

#### 默认（全部数据）(VIEW) :id=project-View
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

```

#### 创建者(createman) :id=project-createman
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 执行人(executor) :id=project-executor
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

WHERE EXISTS(SELECT * FROM `EXECUTOR` t31 
 WHERE 
 t1.`ID` = t31.`PRINCIPAL_ID`  AND  t31.`PRINCIPAL_TYPE` = 'PROJECT'  AND  ( t31.`USER_ID` = #{ctx.sessioncontext.userid} ) )
```

#### 月份无订单(monthNoPro) :id=project-monthNoPro
```sql
SELECT T1.* FROM (
SELECT DISTINCT
null as ACCOUNT_ID,
null as ACCOUNT_NAME,
null as ALLOCATE_MODEL,
0 AS AMOUNT,
#{ctx.datacontext.n_business_line_eq} AS BUSINESS_LINE,
null as CLOSED_DATE,
null as CREATE_MAN,
null as CREATE_TIME,
UUID() AS ID,
null as IS_CLOSE_THIS_YEAR,
null as IS_IN_SALES_CAL,
null as IS_NEW_THIS_YEAR,
null as IS_PHYSICAL_ORDER,
null as LAST_ASSESS_TIME,
null as NAME ,
DATE_FORMAT(your_date, '%Y-%m') as ORDER_DATE,
null   AS OWNER,
null as O_NUMBER,
null as PID,
null as PNAME,
null as SETTLEMENT_AMOUNT,
null as SETTLEMENT_COST,
null as STATUS,
null as TAX,
null as UPDATE_MAN,
null as UPDATE_TIME,
null as YEAR 
FROM (
    SELECT
        DATE_ADD(
            DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.gt},'%Y-%m-%d'), '%Y-%m-01'),
            INTERVAL a.a + (10 * b.a) MONTH
        ) AS your_date
    FROM
        (SELECT 0 a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a  CROSS  JOIN
        (SELECT 0 a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
         UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
         UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
    WHERE  DATE_ADD(DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.gt},'%Y-%m-%d'), '%Y-%m-01'),INTERVAL a.a + (10 * b.a) MONTH) <= DATE_FORMAT(STR_TO_DATE(#{ctx.datacontext.lt},'%Y-%m-%d'), '%Y-%m-01') - INTERVAL 1 DAY
) AS months
) T1
```

#### 所有者(owner) :id=project-owner
```sql
SELECT
t1.`ACCOUNT_ID`,
t11.`ACCOUNT_NAME`,
t1.`ALLOCATE_MODEL`,
t1.`AMOUNT`,
t1.`BUSINESS_LINE`,
t1.`CLOSED_DATE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
case when (YEAR(t1.`CLOSED_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_CLOSE_THIS_YEAR`,
t1.`IS_IN_SALES_CAL`,
case when (YEAR(t1.`ORDER_DATE`) = YEAR(CURDATE())) then 1 else 0 end AS `IS_NEW_THIS_YEAR`,
t1.`IS_PHYSICAL_ORDER`,
t1.`LAST_ASSESS_TIME`,
t1.`NAME`,
t1.`ORDER_DATE`,
t1.`OWNER`,
t1.`O_NUMBER`,
t1.`PID`,
t21.`NAME` AS `PNAME`,
t1.`SETTLEMENT_AMOUNT`,
t1.`SETTLEMENT_COST`,
t1.`STATUS`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`YEAR`
FROM `PROJECT` t1 
LEFT JOIN `ACCOUNT` t11 ON t1.`ACCOUNT_ID` = t11.`ID` 
LEFT JOIN `PROJECT` t21 ON t1.`PID` = t21.`ID` 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```


## [采购订单(PURCHASE_ORDER)](module/crm/purchase_order.md) :id=purchase_order

#### 数据查询(DEFAULT) :id=purchase_order-Default
```sql
SELECT
t1.`ADJUSTMENT`,
t1.`BILING_STREET`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`CARRIER`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DISCOUNT`,
t1.`DUE_DATE`,
t1.`EXCISE_DUTY`,
t1.`GRAND_TOTAL`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`PO_DATE`,
t1.`PO_NUMBER`,
t1.`REQUISITION_NO`,
t1.`SALES_COMMISSION`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`SUB_TOTAL`,
t1.`TAG`,
t1.`TAX`,
t1.`TRACKING_NUMBER`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `PURCHASE_ORDER` t1 

```


## [报价(QUOTE)](module/crm/quote.md) :id=quote

#### 数据查询(DEFAULT) :id=quote-Default
```sql
SELECT
t1.`ADJUSTMENT`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CARRIER`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DISCOUNT`,
t1.`GRAND_TOTAL`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`QUOTE_NUMBER`,
t1.`QUOTE_STAGE`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTRY`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SUBJECT`,
t1.`SUB_TOTAL`,
t1.`TAG`,
t1.`TAX`,
t1.`TEAM`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VALID_TILL`
FROM `QUOTE` t1 

```


## [最近访问(RECENT)](module/crm/recent.md) :id=recent

#### 数据查询(DEFAULT) :id=recent-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`IDENTIFIER`,
t1.`IS_DELETED`,
t1.`NAME`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`RECENT_PARENT`,
t1.`RECENT_PARENT_IDENTIFIER`,
t1.`RECENT_PARENT_NAME`,
concat(t1.`RECENT_PARENT_IDENTIFIER`,'-',t1.`IDENTIFIER`) AS `SHOW_IDENTIFIER`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `RECENT` t1 

```

#### 默认（全部数据）(VIEW) :id=recent-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`IDENTIFIER`,
t1.`IS_DELETED`,
t1.`NAME`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`RECENT_PARENT`,
t1.`RECENT_PARENT_IDENTIFIER`,
t1.`RECENT_PARENT_NAME`,
concat(t1.`RECENT_PARENT_IDENTIFIER`,'-',t1.`IDENTIFIER`) AS `SHOW_IDENTIFIER`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `RECENT` t1 

```


## [关联(RELATION)](module/crm/relation.md) :id=relation

#### 数据查询(DEFAULT) :id=relation-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `RELATION` t1 

```

#### 默认（全部数据）(VIEW) :id=relation-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `RELATION` t1 

```


## [预留(RESERVATION)](module/crm/reservation.md) :id=reservation

#### 数据查询(DEFAULT) :id=reservation-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `RESERVATION` t1 

```

#### 默认（全部数据）(VIEW) :id=reservation-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `RESERVATION` t1 

```


## [销售订单(SALES_ORDER)](module/crm/sales_order.md) :id=sales_order

#### 数据查询(DEFAULT) :id=sales_order-Default
```sql
SELECT
t1.`ADJUSTMENT`,
t1.`BILLING_CITY`,
t1.`BILLING_CODE`,
t1.`BILLING_COUNTRY`,
t1.`BILLING_STATE`,
t1.`BILLING_STREET`,
t1.`CARRIER`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`CUSTOMER_NO`,
t1.`DISCOUNT`,
t1.`DUE_DATE`,
t1.`EXCISE_DUTY`,
t1.`GRAND_TOTAL`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`PENDING`,
t1.`PURCHASE_ORDER`,
t1.`SALES_COMMISSION`,
t1.`SHIPPING_CITY`,
t1.`SHIPPING_CODE`,
t1.`SHIPPING_COUNTR`,
t1.`SHIPPING_STATE`,
t1.`SHIPPING_STREET`,
t1.`SO_NUMBER`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`SUB_TOTAL`,
t1.`TAG`,
t1.`TAX`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SALES_ORDER` t1 

```


## [日程(SCHEDULE)](module/crm/schedule.md) :id=schedule

#### 数据查询(DEFAULT) :id=schedule-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`ID`,
case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end AS `IS_CLOSE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`START_DATETIME`,
t1.`STATUS`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SCHEDULE` t1 

```

#### 默认（全部数据）(VIEW) :id=schedule-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`ID`,
case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end AS `IS_CLOSE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`START_DATETIME`,
t1.`STATUS`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SCHEDULE` t1 

```

#### 已关闭(close) :id=schedule-close
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`ID`,
case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end AS `IS_CLOSE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`START_DATETIME`,
t1.`STATUS`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SCHEDULE` t1 

WHERE ( case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end = '1'  AND  t1.`TYPE` <> 'RESERVATION' )
```

#### 创建者(createman) :id=schedule-createman
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`ID`,
case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end AS `IS_CLOSE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`START_DATETIME`,
t1.`STATUS`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SCHEDULE` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 未关闭的(not_close) :id=schedule-not_close
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`ID`,
case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end AS `IS_CLOSE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`START_DATETIME`,
t1.`STATUS`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SCHEDULE` t1 

WHERE ( case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end = '0'  AND  t1.`TYPE` <> 'RESERVATION' )
```

#### 所有者(owner) :id=schedule-owner
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATETIME`,
t1.`ID`,
case when t1.`TYPE` = 'TASK' and t1.`STATUS` <> '40' then 0 when t1.`TYPE` = 'EVENT' and  now()  < t1.`END_DATETIME`  then 0 when t1.`START_DATETIME` = 'CALL' and   now()  < t1.`STATUS` then 0  else 1 end AS `IS_CLOSE`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`START_DATETIME`,
t1.`STATUS`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SCHEDULE` t1 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```


## [服务支持(CASE)](module/crm/service_case.md) :id=service_case

#### 数据查询(DEFAULT) :id=service_case-Default
```sql
SELECT
t1.`CASE_ORIGIN`,
t1.`CASE_REASON`,
t1.`COMMENTS`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMAIL`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NO_OF_COMMENTS`,
t1.`PHONE`,
t1.`PRIORITY`,
t1.`REPORTED_BY`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `CASE` t1 

```


## [解决方案(SOLUTION)](module/crm/solution.md) :id=solution

#### 数据查询(DEFAULT) :id=solution-Default
```sql
SELECT
t1.`COMMENTS`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`NO_OF_COMMENTS`,
t1.`PUBLISHED`,
t1.`SOLUTION_NUMBER`,
t1.`SOLUTION_TITLE`,
t1.`STATUS`,
t1.`TAG`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `SOLUTION` t1 

```


## [标签(TAG)](module/crm/tag.md) :id=tag

#### 数据查询(DEFAULT) :id=tag-Default
```sql
SELECT
t1.`COLOR`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TAG` t1 

```


## [任务&活动(TASK)](module/crm/task.md) :id=task

#### 数据查询(DEFAULT) :id=task-Default
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

```

#### 默认（全部数据）(VIEW) :id=task-View
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

```

#### 所有活动(all_maneuver) :id=task-all_maneuver
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`TYPE` = 'MANEUVER' )
```

#### 所有任务(all_task) :id=task-all_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`TYPE` = 'TASK' )
```

#### 关闭的(close) :id=task-close
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

```

#### 关闭的活动(close_maneuver) :id=task-close_maneuver
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`TYPE` = 'MANEUVER' )
```

#### 关闭的任务(close_task) :id=task-close_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`CLOSED_TIME` IS NOT NULL  AND  t1.`TYPE` = 'TASK' )
```

#### 关闭的任务（关联）(close_task_related) :id=task-close_task_related
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ) AND ( t1.`CLOSED_TIME` IS NOT NULL  AND  t1.`TYPE` = 'TASK' )
```

#### 创建者(createman) :id=task-createman
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 未关联的任务和活动(商机)(deal_not_related_task_and_maneuver) :id=task-deal_not_related_task_and_maneuver
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE NOT(EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ))
```

#### 执行人(executor) :id=task-executor
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE EXISTS(SELECT * FROM `TASK_EXECUTOR` t11 
 WHERE 
 t1.`ID` = t11.`TASK_ID`  AND  ( t11.`USER_ID` = #{ctx.sessioncontext.userid} ) )
```

#### 未关联的任务和活动(线索)(lead_not_related_task_and_maneuver) :id=task-lead_not_related_task_and_maneuver
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE NOT(EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ))
```

#### 活动_关联(maneuver_related) :id=task-maneuver_related
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ) AND ( t1.`TYPE` = 'MANEUVER' )
```

#### 我的所有任务(my_all_task) :id=task-my_all_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`TYPE` = 'TASK'  AND  ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid}  OR  t1.`OWNER` = #{ctx.sessioncontext.userid} ) )
```

#### 我已取消的任务(my_canceled_task) :id=task-my_canceled_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`CLOSED_TIME` IS NOT NULL  AND  t1.`TYPE` = 'TASK'  AND  ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid}  OR  t1.`OWNER` = #{ctx.sessioncontext.userid} ) )
```

#### 我完成的任务(my_done_task) :id=task-my_done_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`CLOSED_TIME` IS NOT NULL  AND  t1.`TYPE` = 'TASK'  AND  ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid}  OR  t1.`OWNER` = #{ctx.sessioncontext.userid} ) )
```

#### 我的活动(my_maneuver) :id=task-my_maneuver
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`TYPE` = 'MANEUVER'  AND  ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpsersonid}  OR  t1.`OWNER` = #{ctx.sessioncontext.userid} ) )
```

#### 我的待办任务(my_todo_task) :id=task-my_todo_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE EXISTS(SELECT * FROM `TASK_EXECUTOR` t11 
 WHERE 
 t1.`ID` = t11.`TASK_ID`  AND  ( t11.`USER_ID` = #{ctx.sessioncontext.userid} ) ) AND ( t1.`TYPE` = 'TASK'  AND  ( t1.`STATUS` = '10'  OR  t1.`STATUS` = '30'  OR  t1.`STATUS` = '50' ) )
```

#### 未关闭的(not_close) :id=task-not_close
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`STATUS` <> '40' )
```

#### 未关闭的任务(not_close_task) :id=task-not_close_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`CLOSED_TIME` IS NULL  AND  t1.`TYPE` = 'TASK' )
```

#### 未关闭的任务（关联）(not_close_task_related) :id=task-not_close_task_related
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ) AND ( t1.`CLOSED_TIME` IS NULL  AND  t1.`TYPE` = 'TASK' )
```

#### 未关联的任务和活动(not_related_task_and_maneuver) :id=task-not_related_task_and_maneuver
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE NOT(EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ))
```

#### 所有者(owner) :id=task-owner
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`OWNER` = #{ctx.sessioncontext.userid} )
```

#### 任务关联已完成任务(relate_complete_task) :id=task-relate_complete_task
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id} ) ) AND ( t1.`STATUS` = '40'  AND  t1.`TYPE` = 'TASK' )
```

#### 周报活动(weeklyActivities) :id=task-weeklyActivities
```sql
SELECT
t1.`CLOSED_TIME`,
t1.`COST`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DUE_DATE`,
DATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,
t1.`END_TIME`,
t1.`ID`,
case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,
case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,
case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,
case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,
case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,
t1.`LAST_ASSESS_TIME`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`OWNER_ID`,
t1.`OWNER_NAME`,
t1.`OWNER_SUBTYPE`,
t1.`OWNER_TYPE`,
t1.`PRIORITY`,
t1.`REMIND_AT`,
t1.`SEND_NOTIFICATION_EMAIL`,
t1.`START_TIME`,
DATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,
t1.`STATUS`,
t1.`SUBJECT`,
t1.`TAG`,
COALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,
t1.`TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `TASK` t1 

WHERE ( t1.`TYPE` = 'MANEUVER'  AND  ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid}  OR  t1.`OWNER` = #{ctx.sessioncontext.srfpersonid} )  AND  YEARWEEK(START_TIME , 1) = YEARWEEK(CURDATE(), 1) )
```


## [任务执行人(TASK_EXECUTOR)](module/crm/task_executor.md) :id=task_executor

#### 数据查询(DEFAULT) :id=task_executor-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t11.`SYSUSERID`,
t1.`TASK_ID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `TASK_EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```

#### 默认（全部数据）(VIEW) :id=task_executor-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t11.`SYSUSERID`,
t1.`TASK_ID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `TASK_EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

```

#### 任务变更通知对象(executor_notify) :id=task_executor-executor_notify
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t11.`SYSUSERID`,
t1.`TASK_ID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_ID`
FROM `TASK_EXECUTOR` t1 
LEFT JOIN `USER` t11 ON t1.`USER_ID` = t11.`ID` 

WHERE ( t11.`SYSUSERID` <> #{ctx.sessioncontext.srfpersonid}  AND  t1.`TASK_ID` = #{ctx.datacontext.id} )
```


## [用户(USER)](module/crm/user.md) :id=user

#### 数据查询(DEFAULT) :id=user-Default
```sql
SELECT
t1.`ALIAS`,
t1.`CITY`,
t1.`COUNTRY`,
t1.`COUNTRY_LOCALE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DOB`,
t1.`EMAIL`,
t1.`ENABLE`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IMAGE_LINK`,
t1.`LAST_NAME`,
t1.`LOCALE`,
t1.`MOBILE`,
t1.`NAME`,
t1.`PHONE`,
t1.`ROLE`,
t1.`STATE`,
t1.`STATUS`,
t1.`STREET`,
t1.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_NAME`,
t1.`WEBSITE`,
t1.`ZIP`
FROM `USER` t1 

WHERE t1.ENABLE = 1
```

#### 默认（全部数据）(VIEW) :id=user-View
```sql
SELECT
t1.`ALIAS`,
t1.`CITY`,
t1.`COUNTRY`,
t1.`COUNTRY_LOCALE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DOB`,
t1.`EMAIL`,
t1.`ENABLE`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IMAGE_LINK`,
t1.`LAST_NAME`,
t1.`LOCALE`,
t1.`MOBILE`,
t1.`NAME`,
t1.`PHONE`,
t1.`ROLE`,
t1.`STATE`,
t1.`STATUS`,
t1.`STREET`,
t1.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_NAME`,
t1.`WEBSITE`,
t1.`ZIP`
FROM `USER` t1 

WHERE t1.ENABLE = 1
```

#### 客户关联销售(account_reluser) :id=user-account_reluser
```sql
SELECT
t1.`ALIAS`,
t1.`CITY`,
t1.`COUNTRY`,
t1.`COUNTRY_LOCALE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DOB`,
t1.`EMAIL`,
t1.`ENABLE`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IMAGE_LINK`,
t1.`LAST_NAME`,
t1.`LOCALE`,
t1.`MOBILE`,
t1.`NAME`,
t1.`PHONE`,
t1.`ROLE`,
t1.`STATE`,
t1.`STATUS`,
t1.`STREET`,
t1.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_NAME`,
t1.`WEBSITE`,
t1.`ZIP`
FROM `USER` t1 

WHERE EXISTS(SELECT * FROM `RELATION` t11 
 WHERE 
 t1.`ID` = t11.`TARGET_ID`  AND  ( t11.`PRINCIPAL_ID` = #{ctx.datacontext.principal_id}  AND  t11.`PRINCIPAL_TYPE` = 'ACCOUNT' ) ) AND t1.ENABLE = 1
```

#### 当前用户(curuser) :id=user-curuser
```sql
SELECT
t1.`ALIAS`,
t1.`CITY`,
t1.`COUNTRY`,
t1.`COUNTRY_LOCALE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DOB`,
t1.`EMAIL`,
t1.`ENABLE`,
t1.`FAX`,
t1.`FIRST_NAME`,
t1.`FULL_NAME`,
t1.`ID`,
t1.`IMAGE_LINK`,
t1.`LAST_NAME`,
t1.`LOCALE`,
t1.`MOBILE`,
t1.`NAME`,
t1.`PHONE`,
t1.`ROLE`,
t1.`STATE`,
t1.`STATUS`,
t1.`STREET`,
t1.`SYSUSERID`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`USER_NAME`,
t1.`WEBSITE`,
t1.`ZIP`
FROM `USER` t1 

WHERE t1.ENABLE = 1 AND ( t1.`SYSUSERID` = #{ctx.sessioncontext.srfpersonid} )
```


## [供应商(VENDOR)](module/crm/vendor.md) :id=vendor

#### 数据查询(DEFAULT) :id=vendor-Default
```sql
SELECT
t1.`CATEGORY`,
t1.`CITY`,
t1.`COUNTRY`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`EMAIL`,
t1.`EMAIL_OPT_OUT`,
t1.`GL_ACCOUNT`,
t1.`ID`,
t1.`LOCKED__S`,
t1.`NAME`,
t1.`OWNER`,
t1.`PHONE`,
t1.`RECORD_LMAGE`,
t1.`STATE`,
t1.`STREET`,
t1.`TAG`,
t1.`UNSUBSCRIBED_MODE`,
t1.`UNSUBSCRIBED_TIME`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`,
t1.`VENDOR_NAME`,
t1.`WEBSITE`,
t1.`ZIP_CODE`
FROM `VENDOR` t1 

```


## [周报(WEEKLIES)](module/crm/weeklies.md) :id=weeklies

#### 数据查询(DEFAULT) :id=weeklies-Default
```sql
SELECT
t1.`ATTACHMENT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATE`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`START_DATE`,
DATEDIFF(CURDATE(),  START_DATE) AS `START_DATE_SORT`,
CONCAT(YEAR(t1.`START_DATE`),LPAD(MONTH(t1.`START_DATE`), 2, '0'),LPAD(DAY(t1.`START_DATE`), 2, '0'),'至',YEAR(t1.`END_DATE`),LPAD(MONTH(t1.`END_DATE`), 2, '0'),LPAD(DAY(t1.`END_DATE`), 2, '0')) AS `STATISTICAL_PERIOD`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLIES` t1 

```

#### 默认（全部数据）(VIEW) :id=weeklies-View
```sql
SELECT
t1.`ATTACHMENT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`END_DATE`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`START_DATE`,
DATEDIFF(CURDATE(),  START_DATE) AS `START_DATE_SORT`,
CONCAT(YEAR(t1.`START_DATE`),LPAD(MONTH(t1.`START_DATE`), 2, '0'),LPAD(DAY(t1.`START_DATE`), 2, '0'),'至',YEAR(t1.`END_DATE`),LPAD(MONTH(t1.`END_DATE`), 2, '0'),LPAD(DAY(t1.`END_DATE`), 2, '0')) AS `STATISTICAL_PERIOD`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLIES` t1 

```

#### 创建者(createman) :id=weeklies-createman
```sql
SELECT
t1.`ATTACHMENT`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`END_DATE`,
t1.`ID`,
t1.`NAME`,
t1.`OWNER`,
t1.`START_DATE`,
DATEDIFF(CURDATE(),  START_DATE) AS `START_DATE_SORT`,
CONCAT(YEAR(t1.`START_DATE`),LPAD(MONTH(t1.`START_DATE`), 2, '0'),LPAD(DAY(t1.`START_DATE`), 2, '0'),'至',YEAR(t1.`END_DATE`),LPAD(MONTH(t1.`END_DATE`), 2, '0'),LPAD(DAY(t1.`END_DATE`), 2, '0')) AS `STATISTICAL_PERIOD`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLIES` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 周报期间(period) :id=weeklies-period
```sql
select DISTINCT CONCAT(YEAR(START_DATE),LPAD(MONTH(START_DATE), 2, '0'),LPAD(DAY(START_DATE), 2, '0'),'至',YEAR(END_DATE),LPAD(MONTH(END_DATE), 2, '0'),LPAD(DAY(END_DATE), 2, '0')) as `STATISTICAL_PERIOD`  from weeklies
```


## [周报明细(WEEKLY_DETAIL)](module/crm/weekly_detail.md) :id=weekly_detail

#### 周报关联活动(Activities) :id=weekly_detail-Activities
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLY_DETAIL` t1 

WHERE ( t1.`TARGET_TYPE` = 'MANEUVER' )
```

#### 数据查询(DEFAULT) :id=weekly_detail-Default
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLY_DETAIL` t1 

```

#### 下周任务计划(TodoTask) :id=weekly_detail-TodoTask
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLY_DETAIL` t1 

WHERE ( t1.`TARGET_TYPE` = 'TASK' )
```

#### 默认（全部数据）(VIEW) :id=weekly_detail-View
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLY_DETAIL` t1 

```

#### 周报关联评估(notes) :id=weekly_detail-notes
```sql
SELECT
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`ID`,
t1.`NAME`,
t1.`PRINCIPAL_ID`,
t1.`PRINCIPAL_TYPE`,
t1.`TARGET_ID`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WEEKLY_DETAIL` t1 

WHERE ( t1.`TARGET_TYPE` = 'NOTE' )
```


## [工作进展(WORK_PROGRESS)](module/crm/work_progress.md) :id=work_progress

#### 数据查询(DEFAULT) :id=work_progress-Default
```sql
SELECT
t1.`ACTIONTYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`NAME`,
t1.`TARGET_ID`,
t1.`TARGET_NAME`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WORK_PROGRESS` t1 

```

#### 默认（全部数据）(VIEW) :id=work_progress-View
```sql
SELECT
t1.`ACTIONTYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`NAME`,
t1.`TARGET_ID`,
t1.`TARGET_NAME`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WORK_PROGRESS` t1 

```

#### 创建者(createman) :id=work_progress-createman
```sql
SELECT
t1.`ACTIONTYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`NAME`,
t1.`TARGET_ID`,
t1.`TARGET_NAME`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WORK_PROGRESS` t1 

WHERE ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpersonid} )
```

#### 根据日期天查询工作进展(findWorkProgressByDate) :id=work_progress-findWorkProgressByDate
```sql
SELECT
t1.`ACTIONTYPE`,
t1.`CREATE_MAN`,
t1.`CREATE_TIME`,
t1.`DESCRIPTION`,
t1.`ID`,
t1.`NAME`,
t1.`TARGET_ID`,
t1.`TARGET_NAME`,
t1.`TARGET_TYPE`,
t1.`UPDATE_MAN`,
t1.`UPDATE_TIME`
FROM `WORK_PROGRESS` t1 

WHERE ( DATE(t1.`CREATE_TIME`) >= 
 #{ctx.datacontext.starttime_gt}
			AND DATE(t1.`CREATE_TIME`) <= 
 #{ctx.datacontext.endtime_lt} )
```

