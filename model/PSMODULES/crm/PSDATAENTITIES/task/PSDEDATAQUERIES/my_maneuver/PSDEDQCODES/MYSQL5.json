{
  "dBType" : "MYSQL5",
  "name" : "MySQL5",
  "getPSDEDataQueryCodeConds" : [ {
    "condType" : "CUSTOM",
    "customCond" : "( t1.`TYPE` = 'MANEUVER'  AND  ( t1.`CREATE_MAN` = #{ctx.sessioncontext.srfpsersonid}  OR  t1.`OWNER` = #{ctx.sessioncontext.userid} ) )",
    "name" : "查询条件"
  } ],
  "getPSDEDataQueryCodeExps" : [ {
    "expression" : "t1.`DESCRIPTION`",
    "name" : "DESCRIPTION"
  }, {
    "expression" : "t1.`CLOSED_TIME`",
    "name" : "CLOSED_TIME"
  }, {
    "expression" : "t1.`COST`",
    "name" : "COST"
  }, {
    "expression" : "t1.`CREATE_MAN`",
    "name" : "CREATE_MAN"
  }, {
    "expression" : "t1.`CREATE_TIME`",
    "name" : "CREATE_TIME"
  }, {
    "expression" : "t1.`DUE_DATE`",
    "name" : "DUE_DATE"
  }, {
    "expression" : "DATEDIFF(CURDATE(), t1.`DUE_DATE`)",
    "name" : "DUE_DATE_SORT"
  }, {
    "expression" : "t1.`END_TIME`",
    "name" : "END_TIME"
  }, {
    "expression" : "t1.`ID`",
    "name" : "ID"
  }, {
    "expression" : "case when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end",
    "name" : "IS_LAST_WEEK"
  }, {
    "expression" : "case when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end",
    "name" : "IS_NEW_LAST_WEEK"
  }, {
    "expression" : "case when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end",
    "name" : "IS_NEW_THIS_WEEK"
  }, {
    "expression" : "case when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end",
    "name" : "IS_THIS_MONTH"
  }, {
    "expression" : "case when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end",
    "name" : "IS_THIS_WEEK"
  }, {
    "expression" : "t1.`LAST_ASSESS_TIME`",
    "name" : "LAST_ASSESS_TIME"
  }, {
    "expression" : "t1.`LOCKED__S`",
    "name" : "LOCKED__S"
  }, {
    "expression" : "t1.`NAME`",
    "name" : "NAME"
  }, {
    "expression" : "t1.`OWNER`",
    "name" : "OWNER"
  }, {
    "expression" : "t1.`OWNER_ID`",
    "name" : "OWNER_ID"
  }, {
    "expression" : "t1.`OWNER_NAME`",
    "name" : "OWNER_NAME"
  }, {
    "expression" : "t1.`OWNER_SUBTYPE`",
    "name" : "OWNER_SUBTYPE"
  }, {
    "expression" : "t1.`OWNER_TYPE`",
    "name" : "OWNER_TYPE"
  }, {
    "expression" : "t1.`PRIORITY`",
    "name" : "PRIORITY"
  }, {
    "expression" : "t1.`REMIND_AT`",
    "name" : "REMIND_AT"
  }, {
    "expression" : "t1.`SEND_NOTIFICATION_EMAIL`",
    "name" : "SEND_NOTIFICATION_EMAIL"
  }, {
    "expression" : "t1.`START_TIME`",
    "name" : "START_TIME"
  }, {
    "expression" : "DATEDIFF(CURDATE(),  START_TIME)",
    "name" : "START_TIME_SORT"
  }, {
    "expression" : "t1.`STATUS`",
    "name" : "STATUS"
  }, {
    "expression" : "t1.`SUBJECT`",
    "name" : "SUBJECT"
  }, {
    "expression" : "t1.`TAG`",
    "name" : "TAG"
  }, {
    "expression" : "COALESCE(t1.`START_TIME`, t1.`DUE_DATE`)",
    "name" : "TASK_DATE"
  }, {
    "expression" : "t1.`TYPE`",
    "name" : "TYPE"
  }, {
    "expression" : "t1.`UPDATE_MAN`",
    "name" : "UPDATE_MAN"
  }, {
    "expression" : "t1.`UPDATE_TIME`",
    "name" : "UPDATE_TIME"
  } ],
  "queryCode" : "SELECT\nt1.`CLOSED_TIME`,\nt1.`COST`,\nt1.`CREATE_MAN`,\nt1.`CREATE_TIME`,\nt1.`DUE_DATE`,\nDATEDIFF(CURDATE(), t1.`DUE_DATE`) AS `DUE_DATE_SORT`,\nt1.`END_TIME`,\nt1.`ID`,\ncase when t1.`START_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_LAST_WEEK`,\ncase when t1.`CREATE_TIME` BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND DATE_SUB(CURDATE(), INTERVAL 1 DAY) then 1 else 0 end AS `IS_NEW_LAST_WEEK`,\ncase when (YEARWEEK(t1.`CREATE_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_NEW_THIS_WEEK`,\ncase when (MONTH(t1.`START_TIME`) = MONTH(CURDATE())) then 1 else 0 end AS `IS_THIS_MONTH`,\ncase when (YEARWEEK(t1.`START_TIME`, 1) = YEARWEEK(CURDATE(), 1)) then 1 else 0 end AS `IS_THIS_WEEK`,\nt1.`LAST_ASSESS_TIME`,\nt1.`LOCKED__S`,\nt1.`NAME`,\nt1.`OWNER`,\nt1.`OWNER_ID`,\nt1.`OWNER_NAME`,\nt1.`OWNER_SUBTYPE`,\nt1.`OWNER_TYPE`,\nt1.`PRIORITY`,\nt1.`REMIND_AT`,\nt1.`SEND_NOTIFICATION_EMAIL`,\nt1.`START_TIME`,\nDATEDIFF(CURDATE(),  START_TIME) AS `START_TIME_SORT`,\nt1.`STATUS`,\nt1.`SUBJECT`,\nt1.`TAG`,\nCOALESCE(t1.`START_TIME`, t1.`DUE_DATE`) AS `TASK_DATE`,\nt1.`TYPE`,\nt1.`UPDATE_MAN`,\nt1.`UPDATE_TIME`\nFROM `TASK` t1 \n",
  "id" : "PSMODULES/crm/PSDATAENTITIES/task/PSDEDATAQUERIES/my_maneuver/PSDEDQCODES/MYSQL5.json"
}